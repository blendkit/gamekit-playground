<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>Examples and tutorials.</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
            </head>
    <body>
            <table class="tableMenu" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td hlign="left" valign="middle" class="left">
                        <h2>
                        <a href="index.html">[OgreKit Lua]</a>
                        </h2>
                    </td>
                    <td hlign="right" valign="top" hlign="right" class="right">
                        <ul>
                            <li><a href="file_8lua.html">Files</a></li>
                            <li><a href="annotated.html">Classes</a></li>
                            <li><a href="hierarchy.html">Hierarchy</a></li>
                            <li><a href="_examples.html">Examples</a></li>
                            <li><a href="_about.html">About</a></li>
                        </ul>
                    </td>
                </tr>
            </table>
        <!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Examples and tutorials. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
<table  class="nav" cellspacing="0" cellpadding="0">
<tr>
<td class="left"><a class="el" href="Examples.html#Setup">Setup for a stand alone application</a></td><td></td></tr>
<tr>
<td class="left"><a class="el" href="Examples.html#OnInit">Setup for an embedded application</a></td><td></td></tr>
<tr>
<td class="left"><a class="el" href="Examples.html#CDefs">Custom User defined variables.</a></td><td></td></tr>
<tr>
<td class="left"><a class="el" href="Examples.html#CArrayIter">Using arrays and iterators.</a></td><td></td></tr>
<tr>
<td class="left"><a class="el" href="Examples.html#CustomLogicBricks">Adding custom logic brick callbacks.</a></td><td></td></tr>
</table>
<p><br />
</p>
<h1><a class="anchor" id="Setup"></a>
Setup for a stand alone application</h1>
<p>An example showing how to set up the OgreKit <a class="el" href="class_engine.html">Engine</a>, and load a .blend. </p><div class="fragment"><div class="line">-- Extend the engine.</div><div class="line">OgreKitApp = BaseClass(OgreKit.Engine)</div><div class="line"></div><div class="line"></div><div class="line">function OgreKitApp:constructor()</div><div class="line"></div><div class="line"></div><div class="line">    self.prefs              = self:getUserDefs()</div><div class="line">    self.prefs.winTitle     = &quot;Engine Setup&quot;</div><div class="line">    self.prefs.verbose      = false</div><div class="line">    self.prefs.grabInput    = false</div><div class="line">    self.prefs.blenderMat   = true</div><div class="line">    self.prefs.debugFps     = true</div><div class="line">    self.keyboard           = OgreKit.Keyboard()</div><div class="line"></div><div class="line"></div><div class="line">    -- call internal engine setup.</div><div class="line">    self:initialize()</div><div class="line"></div><div class="line"></div><div class="line">    -- Loads the first scene, or the active one.</div><div class="line">    self.scene = self:loadBlendFile(&quot;Test0.blend&quot;)</div><div class="line"></div><div class="line"></div><div class="line">    -- Converts blender data to Ogre. </div><div class="line">    self.scene:initialize()</div><div class="line"></div><div class="line"></div><div class="line">    -- We now have access to all the objects within the OgreKit scene. </div><div class="line"></div><div class="line">    -- Grab the default cube.</div><div class="line">    self.object = self.scene:getObject(&quot;Cube&quot;)</div><div class="line">end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">--- Engine tick listener.</div><div class="line">function OgreKitApp:OnTick(delta)</div><div class="line"></div><div class="line">    if self.keyboard:isKeyDown(OgreKit.KC_ESCKEY) then</div><div class="line">        self:requestExit()</div><div class="line">    end</div><div class="line"></div><div class="line">    self.object:rotate(0, 0, -90 * delta)</div><div class="line"></div><div class="line">end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">-- Create the application.</div><div class="line">local app = OgreKitApp()</div><div class="line"></div><div class="line">-- Connect Events</div><div class="line">app:connect(OgreKit.EVT_TICK, app, OgreKitApp.OnTick)</div><div class="line"></div><div class="line">-- Start the main loop.</div><div class="line">app:run()</div><div class="line"></div></div><!-- fragment --><p><br />
 </p><hr/>
<h1><a class="anchor" id="OnInit"></a>
Setup for an embedded application</h1>
<p>Setup from inside blender takes place in a predefined text block named <b><a class="el" href="_on_init_8lua.html">OnInit.lua</a></b> <br />
This script will execute every time the scene is loaded.<br />
 Scripts may still span multiple text files using the standard Blender game engine method. By attaching to a Python controller.<em> <a class="el" href="class_script_controller.html">ScriptController</a> </em></p>
<div class="fragment"><div class="line">Demo = BaseClass(OgreKit.Engine)</div><div class="line"></div><div class="line">function Demo:constructor()</div><div class="line"></div><div class="line">    self.scene = self:getActiveScene()</div><div class="line"></div><div class="line">end</div><div class="line"></div><div class="line"></div><div class="line">function Demo:OnUpdate(delta)</div><div class="line"></div><div class="line">          OgreKit.DebugPrint(&quot;Demo main loop running ==&gt; &quot; .. self.scene:getName())</div><div class="line"></div><div class="line">end</div><div class="line"></div><div class="line"></div><div class="line">demo = Demo()</div><div class="line">demo:connect(OgreKit.EVT_TICK, demo, Demo.OnUpdate)</div></div><!-- fragment --><p><br />
 </p><hr/>
<h1><a class="anchor" id="CDefs"></a>
Custom User defined variables.</h1>
<p>This shows a simple way to add custom properties to <a class="el" href="class_user_defs.html">UserDefs</a>. </p><div class="fragment"><div class="line">local engine = OgreKit.Engine()</div><div class="line">local prefs  = engine:getUserDefs()</div><div class="line"></div><div class="line">local custom = OgreKit.<a class="code" href="class_property.html">Property</a>(&quot;Custom&quot;, &quot;Hello World&quot;)</div><div class="line">prefs:addProperty(custom)</div><div class="line"></div><div class="line">print(prefs.Custom)</div></div><!-- fragment --><p> <br />
 </p><hr/>
<h1><a class="anchor" id="CArrayIter"></a>
Using arrays and iterators.</h1>
<p>Example array and iterator usage</p>
<div class="fragment"><div class="line">local objects = OgreKit.ObjectList()</div><div class="line">objects:push(scene:getObject(<span class="stringliteral">&quot;Cube&quot;</span>))</div><div class="line"></div><div class="line"></div><div class="line">local iter = objects:iterator()</div><div class="line">while (iter:hasMoreElements()) do</div><div class="line">    local obj = iter:getNext()</div><div class="line"></div><div class="line">    <a class="code" href="classd_printf.html">dPrintf</a>(&quot;%s, %s&quot;, obj:getName(), tostring(obj:getWorldPosition()))</div><div class="line">end</div></div><!-- fragment --><p><br />
 </p><hr/>
<h1><a class="anchor" id="CustomLogicBricks"></a>
Adding custom logic brick callbacks.</h1>
<p>This shows one way to add custom callbacks on logic bricks. The example here shows usage for sensors, but the method applies to controllers and actuators.</p>
<div class="fragment"><div class="line">--- Get logic manager</div><div class="line">logicManager = OgreKit.LogicManager()</div><div class="line"></div><div class="line">player = scene:getObject(<span class="stringliteral">&quot;Cube&quot;</span>)</div><div class="line"></div><div class="line">logicPlayer = logicManager:newObject(player)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">--- <a class="code" href="class_sensor.html">Sensor</a></div><div class="line"></div><div class="line">delay = OgreKit.<a class="code" href="class_delay_sensor.html">DelaySensor</a>(logicPlayer)</div><div class="line">delay:setDelay(20)</div><div class="line"></div><div class="line"></div><div class="line">--- <a class="code" href="class_controller.html">Controller</a></div><div class="line"></div><div class="line">operator = OgreKit.<a class="code" href="class_logic_op_controller.html">LogicOpController</a>(logicPlayer)</div><div class="line">operator:setOp(OgreKit.<a class="code" href="gs_bricks_8h.html#a7f074d9baa3eddd605b60fd9035ceecfa8d05c5ceb5a65bd7ffdf5062fa502b29">LOP_AND</a>)</div><div class="line"></div><div class="line"></div><div class="line">--- <a class="code" href="class_actuator.html">Actuator</a></div><div class="line"></div><div class="line">motion = OgreKit.<a class="code" href="class_motion_actuator.html">MotionActuator</a>(logicPlayer)</div><div class="line">motion:setRotation(0.0, 0.0, 0.15, true)</div><div class="line"></div><div class="line"></div><div class="line">--- Connect links</div><div class="line"></div><div class="line">operator:link(delay)</div><div class="line">operator:link(motion)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">-- Add callbacks</div><div class="line"></div><div class="line">DelayCallback = <a class="code" href="class_class.html">Class</a>()</div><div class="line">function DelayCallback:constructor(sensor)</div><div class="line"></div><div class="line"></div><div class="line">    sensor:connect(OgreKit.<a class="code" href="gs_bricks_8h.html#a3c2c1d6029fdcd572a5ca953cf462718a1e711fd52446d58174f0d5e130e76024">LM_EVT_OVERIDE</a>, self, DelayCallback.OnQuery)</div><div class="line"></div><div class="line">    self.maxDelay = sensor:getDelay()</div><div class="line">    self.incrment = 0</div><div class="line">    self.len = self.maxDelay</div><div class="line"></div><div class="line">end</div><div class="line"></div><div class="line"></div><div class="line">function DelayCallback:OnQuery()</div><div class="line"></div><div class="line">    -- do tests</div><div class="line"></div><div class="line"></div><div class="line">    if (self.incrment &gt; self.maxDelay) then</div><div class="line">        if (self.incrment &gt; self.len * 2) then</div><div class="line">            self.incrment = 0</div><div class="line">        else</div><div class="line">            self.incrment = self.incrment + 1</div><div class="line">        end</div><div class="line"></div><div class="line">        return true</div><div class="line">    end</div><div class="line"></div><div class="line">    self.incrment = self.incrment + 1</div><div class="line">    return false</div><div class="line">end</div><div class="line"></div><div class="line">callback = DelayCallback(delay)</div></div><!-- fragment --><p><br />
 </p><hr/>
 </div></div><!-- contents -->
            </div>
        </div>
        <br />
        <br />
        <div id="footer">
            <hr />
            <center>
            <p> <small>Generated By Doxygen(1.8.11)</small>
            </p>
            </center>
        </div>
    </body>
</html>
